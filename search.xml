<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Strongswan 编译报错及解决办法</title>
      <link href="/2026/02/03/3-Strongswan-%E7%BC%96%E8%AF%91%E6%8A%A5%E9%94%99%E5%8F%8A%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95/"/>
      <url>/2026/02/03/3-Strongswan-%E7%BC%96%E8%AF%91%E6%8A%A5%E9%94%99%E5%8F%8A%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<p>在编译 Strongswan 时，遇到了一些报错信息，经过排查和解决，记录如下。</p><h2><span id="快速导航">快速导航</span></h2><h3><span id="autogensh-阶段报错">autogen.sh 阶段报错</span></h3><ul><li><a href="#autoconf-%E6%8A%A5%E9%94%99">autoconf 报错</a></li><li><a href="#libtool-%E6%8A%A5%E9%94%99">libtool 报错</a></li><li><a href="#gettext-%E6%8A%A5%E9%94%99">gettext 报错</a></li></ul><h3><span id="configure-阶段报错">configure 阶段报错</span></h3><ul><li><a href="#gperf-%E6%8A%A5%E9%94%99">gperf 报错</a></li><li><a href="#gmp-%E6%8A%A5%E9%94%99">gmp 报错</a></li><li><a href="#ldap-%E6%8A%A5%E9%94%99">ldap 报错</a></li><li><a href="#curl-%E6%8A%A5%E9%94%99">curl 报错</a></li><li><a href="#dns-%E6%8A%A5%E9%94%99">dns 报错</a></li><li><a href="#unbound-%E6%8A%A5%E9%94%99">unbound 报错</a></li><li><a href="#soup-%E6%8A%A5%E9%94%99">soup 报错</a></li><li><a href="#systemd-%E6%8A%A5%E9%94%99">systemd 报错</a></li><li><a href="#libtspi-%E6%8A%A5%E9%94%99">libtspi 报错</a></li><li><a href="#tss2-%E6%8A%A5%E9%94%99">tss2 报错</a></li><li><a href="#json-c-%E6%8A%A5%E9%94%99">json-c 报错</a></li><li><a href="#neo_utl-%E6%8A%A5%E9%94%99">neo_utl 报错</a></li><li><a href="#fcgi-%E6%8A%A5%E9%94%99">fcgi 报错</a></li><li><a href="#mysql-%E6%8A%A5%E9%94%99">mysql 报错</a></li><li><a href="#wolfssl-%E6%8A%A5%E9%94%99">wolfssl 报错</a></li><li><a href="#gcrypt-%E6%8A%A5%E9%94%99">gcrypt 报错</a></li><li><a href="#botan-%E6%8A%A5%E9%94%99">botan 报错</a></li><li><a href="#pcsclite-%E6%8A%A5%E9%94%99">pcsclite 报错</a></li><li><a href="#nm-%E6%8A%A5%E9%94%99">nm 报错</a></li><li><a href="#uci-%E6%8A%A5%E9%94%99">uci 报错</a></li><li><a href="#cutils-%E6%8A%A5%E9%94%99">cutils 报错</a></li><li><a href="#ip4tc-%E6%8A%A5%E9%94%99">ip4tc 报错</a></li><li><a href="#gprbuild-%E6%8A%A5%E9%94%99">gprbuild 报错</a></li><li><a href="#make-%E6%8A%A5%E9%94%99">make 报错</a></li></ul><h3><span id="make-阶段报错">make 阶段报错</span></h3><ul><li><a href="#bison-%E6%8A%A5%E9%94%99">bison 报错</a></li><li><a href="#flex-%E6%8A%A5%E9%94%99">flex 报错</a></li><li><a href="#setuptools-%E6%8A%A5%E9%94%99">setuptools 报错</a></li><li><a href="#gprbuild-%E6%8A%A5%E9%94%99-1">gprbuild 报错</a></li><li><a href="#unwind-%E6%8A%A5%E9%94%99">unwind 报错</a></li><li><a href="#cov-%E6%8A%A5%E9%94%99">cov 报错</a></li><li><a href="#gem-%E6%8A%A5%E9%94%99">gem 报错</a></li><li><a href="#easy_install-%E6%8A%A5%E9%94%99">easy_install 报错</a></li></ul><h2><span id="详细错误信息">详细错误信息</span></h2><h3><span id="autogensh-报错">autogen.sh 报错</span></h3><hr><h4><span id="1-autoconf-报错">1. <code>autoconf</code> 报错</span></h4><ul><li>错误信息：</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Command <span class="string">&#x27;autoreconf&#x27;</span> not found, but can be installed with:</span><br><span class="line">apt install autoconf</span><br></pre></td></tr></table></figure><ul><li><p>错误原因：autoreconf 是 autoconf 工具的一个子命令，用于自动生成 configure 脚本。如果没有安装 autoreconf，就会报错。</p></li><li><p>解决办法：安装 autoconf 工具</p></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt install autoconf</span><br></pre></td></tr></table></figure><hr><h4><span id="2-libtool-报错">2. <code>libtool</code> 报错</span></h4><ul><li>错误信息：</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Can<span class="string">&#x27;t exec &quot;libtoolize&quot;: 没有那个文件或目录 at /usr/share/autoconf/Autom4te/FileUtils.pm line 345, &lt;GEN3&gt; line 4.</span></span><br><span class="line"><span class="string">autoreconf: failed to run libtoolize: No such file or directory</span></span><br><span class="line"><span class="string">autoreconf: libtoolize is needed because this package uses Libtool</span></span><br></pre></td></tr></table></figure><ul><li><p>错误原因：libtoolize 是 libtool 工具的一个子命令，用于自动生成 libtool 脚本。如果没有安装 libtoolize，就会报错。</p></li><li><p>解决办法：安装 libtool 工具</p></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt install libtool</span><br></pre></td></tr></table></figure><hr><h4><span id="3-gettext-报错">3. <code>gettext</code> 报错</span></h4><ul><li>错误信息：</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">configure.ac:379: error: possibly undefined macro: AC_LIB_PREFIX</span><br><span class="line">     If this token and others are legitimate, please use m4_pattern_allow.</span><br><span class="line">     See the Autoconf documentation.</span><br><span class="line">autoreconf: /usr/bin/autoconf failed with <span class="built_in">exit</span> status: 1</span><br></pre></td></tr></table></figure><ul><li><p>错误原因：用于解决 AC_LIB_PREFIX 宏没有定义问题，以前的解决方法是：<code>cp -rf /usr/share/aclocal/* /usr/local/share/aclocal/</code> 但是不能从根源上解决问题</p></li><li><p>解决办法：安装 gettext</p></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt-get install gettext</span><br></pre></td></tr></table></figure><h3><span id="configure-报错">configure 报错</span></h3><hr><h4><span id="1-gperf-报错">1. <code>gperf</code> 报错</span></h4><ul><li>错误信息：</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">checking gperf len <span class="built_in">type</span>... not found</span><br><span class="line">configure: error: GNU gperf required to generate e.g. ./src/libstrongswan/crypto/proposal/proposal_keywords_static.c</span><br></pre></td></tr></table></figure><ul><li><p>错误原因：编译过程中需要使用 GNU gperf 生成一些静态文件</p></li><li><p>解决办法：安装 gperf</p></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt-get install gperf</span><br></pre></td></tr></table></figure><hr><h4><span id="2-gmp-报错">2. <code>gmp</code> 报错</span></h4><ul><li>错误信息：</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">configure: error: GNU Multi Precision library gmp not found</span><br></pre></td></tr></table></figure><ul><li><p>错误原因：Strongswan 需要 GNU Multi Precision 库来进行大数运算</p></li><li><p>解决办法：安装 gmp 开发包</p></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt-get install libgmp-dev</span><br></pre></td></tr></table></figure><hr><h4><span id="3-ldap-报错">3. <code>ldap</code> 报错</span></h4><ul><li>错误信息：</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">checking <span class="keyword">for</span> ldap_init <span class="keyword">in</span> -lldap... no</span><br><span class="line">configure: error: LDAP library ldap not found</span><br></pre></td></tr></table></figure><ul><li><p>错误原因：LDAP 支持库未找到</p></li><li><p>解决办法：安装 LDAP 开发包</p></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt-get install libldap2-dev</span><br></pre></td></tr></table></figure><hr><h4><span id="4-curl-报错">4. <code>curl</code> 报错</span></h4><ul><li>错误信息：</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">checking <span class="keyword">for</span> curl_global_init <span class="keyword">in</span> -lcurl... no</span><br><span class="line">configure: error: CURL library curl not found</span><br></pre></td></tr></table></figure><ul><li><p>错误原因：CURL 支持库未找到</p></li><li><p>解决办法：安装 CURL 开发包</p></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt-get install libcurl4-openssl-dev</span><br></pre></td></tr></table></figure><hr><h4><span id="5-dns-报错">5. <code>dns</code> 报错</span></h4><ul><li>错误信息：</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">checking <span class="keyword">for</span> ldns_rr_get_type <span class="keyword">in</span> -lldns... no</span><br><span class="line">configure: error: UNBOUND library ldns not found</span><br></pre></td></tr></table></figure><ul><li><p>错误原因：DNS 支持库未找到</p></li><li><p>解决办法：安装 DNS 开发包</p></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt-get install libldns-dev</span><br></pre></td></tr></table></figure><hr><h4><span id="6-unbound-报错">6. <code>unbound</code> 报错</span></h4><ul><li>错误信息：</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">checking <span class="keyword">for</span> ub_ctx_create <span class="keyword">in</span> -lunbound... no</span><br><span class="line">configure: error: UNBOUND library libunbound not found</span><br></pre></td></tr></table></figure><ul><li><p>错误原因：Unbound DNS 解析库未找到  </p></li><li><p>解决办法：安装 Unbound 开发包</p></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt-get install libunbound-dev</span><br></pre></td></tr></table></figure><hr><h4><span id="7-soup-报错">7. <code>soup</code> 报错</span></h4><ul><li>错误信息：</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">configure: error: Package requirements (libsoup-2.4) were not met:</span><br><span class="line"></span><br><span class="line">No package <span class="string">&#x27;libsoup-2.4&#x27;</span> found</span><br><span class="line"></span><br><span class="line">Consider adjusting the PKG_CONFIG_PATH environment variable <span class="keyword">if</span> you</span><br><span class="line">installed software <span class="keyword">in</span> a non-standard prefix.</span><br><span class="line"></span><br><span class="line">Alternatively, you may <span class="built_in">set</span> the environment variables soup_CFLAGS</span><br><span class="line">and soup_LIBS to avoid the need to call pkg-config.</span><br><span class="line">See the pkg-config man page <span class="keyword">for</span> more details.</span><br></pre></td></tr></table></figure><ul><li><p>错误原因：libsoup-2.4 库未找到</p></li><li><p>解决办法：安装 libsoup2.4 开发包</p></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt-get install libsoup2.4-dev</span><br></pre></td></tr></table></figure><hr><h4><span id="8-systemd-报错">8. <code>systemd</code> 报错</span></h4><ul><li>错误信息：</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">configure: error: Package requirements (libsystemd-daemon) were not met:</span><br><span class="line"></span><br><span class="line">No package <span class="string">&#x27;libsystemd-daemon&#x27;</span> found</span><br><span class="line"></span><br><span class="line">Consider adjusting the PKG_CONFIG_PATH environment variable <span class="keyword">if</span> you</span><br><span class="line">installed software <span class="keyword">in</span> a non-standard prefix.</span><br><span class="line"></span><br><span class="line">Alternatively, you may <span class="built_in">set</span> the environment variables systemd_daemon_CFLAGS</span><br><span class="line">and systemd_daemon_LIBS to avoid the need to call pkg-config.</span><br><span class="line">See the pkg-config man page <span class="keyword">for</span> more details.</span><br></pre></td></tr></table></figure><ul><li><p>错误原因：libsystemd-daemon 库未找到</p></li><li><p>解决办法：安装 systemd 开发包</p></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt-get install libsystemd-dev</span><br></pre></td></tr></table></figure><hr><h4><span id="9-libtspi-报错">9. <code>libtspi</code> 报错</span></h4><ul><li>错误信息：</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">configure: error: TrouSerS library libtspi not found</span><br><span class="line">make: *** 没有指明目标并且找不到 makefile。 停止。</span><br></pre></td></tr></table></figure><ul><li><p>错误原因：TrouSerS TPM 库未找到</p></li><li><p>解决办法：安装 TrouSerS 开发包</p></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt-get install trousers libtspi-dev</span><br></pre></td></tr></table></figure><hr><h4><span id="10-tss2-报错">10. <code>tss2</code> 报错</span></h4><ul><li>错误信息：</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">configure: error: <span class="keyword">in</span> `/home/share/qin.yuan/compile/module/wtd/ike/strongswan-5.9.6<span class="string">&#x27;:</span></span><br><span class="line"><span class="string">configure: error: no TSS2 TCTI or SAPI libraries detected</span></span><br><span class="line"><span class="string">See `config.log&#x27;</span> <span class="keyword">for</span> more details</span><br><span class="line">make: *** 没有指明目标并且找不到 makefile。 停止。</span><br></pre></td></tr></table></figure><ul><li><p>错误原因：TSS2 (Trusted Software Stack 2.0) 库未找到</p></li><li><p>解决办法：安装 TSS2 开发包</p></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt-get install libtss2-dev</span><br></pre></td></tr></table></figure><hr><h4><span id="11-json-c-报错">11. <code>json-c</code> 报错</span></h4><ul><li>错误信息：</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">configure: error: Package requirements (json) were not met:</span><br><span class="line"></span><br><span class="line">No package <span class="string">&#x27;json&#x27;</span> found</span><br><span class="line"></span><br><span class="line">Consider adjusting the PKG_CONFIG_PATH environment variable <span class="keyword">if</span> you</span><br><span class="line">installed software <span class="keyword">in</span> a non-standard prefix.</span><br><span class="line"></span><br><span class="line">Alternatively, you may <span class="built_in">set</span> the environment variables json_CFLAGS</span><br><span class="line">and json_LIBS to avoid the need to call pkg-config.</span><br><span class="line">See the pkg-config man page <span class="keyword">for</span> more details.</span><br></pre></td></tr></table></figure><ul><li><p>错误原因：json-c 库未找到</p></li><li><p>解决办法：安装 json-c 开发包</p></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt-get install libjson-c-dev</span><br></pre></td></tr></table></figure><hr><h4><span id="12-neo_utl-报错">12. <code>neo_utl</code> 报错</span></h4><ul><li>错误信息：</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">configure: error: ClearSilver library neo_utl not found!</span><br><span class="line">make: *** 没有指明目标并且找不到 makefile。 停止。</span><br></pre></td></tr></table></figure><ul><li><p>错误原因：ClearSilver 库未找到</p></li><li><p>解决办法：安装 ClearSilver 开发包</p></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt-get install clearsilver-dev</span><br></pre></td></tr></table></figure><hr><h4><span id="13-fcgi-报错">13. <code>fcgi</code> 报错</span></h4><ul><li>错误信息：</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">configure: error: FastCGI library fcgi not found!</span><br><span class="line">make: *** 没有指明目标并且找不到 makefile。 停止。</span><br></pre></td></tr></table></figure><ul><li><p>错误原因：FastCGI 库未找到</p></li><li><p>解决办法：安装 FCGI 开发包</p></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt-get install libfcgi-dev</span><br></pre></td></tr></table></figure><hr><h4><span id="14-mysql-报错">14. <code>mysql</code> 报错</span></h4><ul><li>错误信息：</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">configure: error: mysql_config not found!</span><br><span class="line">make: *** 没有指明目标并且找不到 makefile。 停止。</span><br></pre></td></tr></table></figure><ul><li><p>错误原因：MySQL 配置工具未找到</p></li><li><p>解决办法：安装 MySQL 开发包</p></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt-get install libmysqlclient-dev</span><br></pre></td></tr></table></figure><hr><h4><span id="15-wolfssl-报错">15. <code>wolfssl</code> 报错</span></h4><ul><li>错误信息：</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">configure: error: Package requirements (wolfssl) were not met:</span><br><span class="line"></span><br><span class="line">No package <span class="string">&#x27;wolfssl&#x27;</span> found</span><br><span class="line"></span><br><span class="line">Consider adjusting the PKG_CONFIG_PATH environment variable <span class="keyword">if</span> you</span><br><span class="line">installed software <span class="keyword">in</span> a non-standard prefix.</span><br><span class="line"></span><br><span class="line">Alternatively, you may <span class="built_in">set</span> the environment variables wolfssl_CFLAGS</span><br><span class="line">and wolfssl_LIBS to avoid the need to call pkg-config.</span><br><span class="line">See the pkg-config man page <span class="keyword">for</span> more details.</span><br></pre></td></tr></table></figure><ul><li><p>错误原因：WolfSSL 库未找到</p></li><li><p>解决办法：安装 WolfSSL 开发包</p></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt-get install libwolfssl-dev</span><br></pre></td></tr></table></figure><hr><h4><span id="16-gcrypt-报错">16. <code>gcrypt</code> 报错</span></h4><ul><li>错误信息：</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">checking <span class="keyword">for</span> gcry_control <span class="keyword">in</span> -lgcrypt... no</span><br><span class="line">configure: error: gcrypt library not found</span><br></pre></td></tr></table></figure><ul><li><p>错误原因：Gcrypt 库未找到</p></li><li><p>解决办法：安装 Gcrypt 开发包</p></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt-get install libgcrypt-dev</span><br></pre></td></tr></table></figure><hr><h4><span id="17-botan-报错">17. <code>botan</code> 报错</span></h4><ul><li>错误信息：</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">configure: error: Package requirements (botan-2) were not met:</span><br><span class="line"></span><br><span class="line">No package <span class="string">&#x27;botan-2&#x27;</span> found</span><br><span class="line"></span><br><span class="line">Consider adjusting the PKG_CONFIG_PATH environment variable <span class="keyword">if</span> you</span><br><span class="line">installed software <span class="keyword">in</span> a non-standard prefix.</span><br><span class="line"></span><br><span class="line">Alternatively, you may <span class="built_in">set</span> the environment variables botan_CFLAGS</span><br><span class="line">and botan_LIBS to avoid the need to call pkg-config.</span><br><span class="line">See the pkg-config man page <span class="keyword">for</span> more details.</span><br></pre></td></tr></table></figure><ul><li><p>错误原因：Botan-2 加密库未找到</p></li><li><p>解决办法：安装 Botan-2 开发包</p></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt-get install libbotan-2-dev</span><br></pre></td></tr></table></figure><hr><h4><span id="18-pcsclite-报错">18. <code>pcsclite</code> 报错</span></h4><ul><li>错误信息：</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">configure: error: Package requirements (libpcsclite) were not met:</span><br><span class="line"></span><br><span class="line">No package <span class="string">&#x27;libpcsclite&#x27;</span> found</span><br><span class="line"></span><br><span class="line">Consider adjusting the PKG_CONFIG_PATH environment variable <span class="keyword">if</span> you</span><br><span class="line">installed software <span class="keyword">in</span> a non-standard prefix.</span><br><span class="line"></span><br><span class="line">Alternatively, you may <span class="built_in">set</span> the environment variables pcsclite_CFLAGS</span><br><span class="line">and pcsclite_LIBS to avoid the need to call pkg-config.</span><br><span class="line">See the pkg-config man page <span class="keyword">for</span> more details.</span><br></pre></td></tr></table></figure><ul><li><p>错误原因：PCSClite 智能卡库未找到</p></li><li><p>解决办法：安装 PCSClite 开发包</p></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt-get install libpcsclite-dev</span><br></pre></td></tr></table></figure><hr><h4><span id="19-nm-报错">19. <code>nm</code> 报错</span></h4><ul><li>错误信息：</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">configure: error: Package requirements (gthread-2.0 libnm) were not met:</span><br><span class="line"></span><br><span class="line">No package <span class="string">&#x27;libnm&#x27;</span> found</span><br><span class="line"></span><br><span class="line">Consider adjusting the PKG_CONFIG_PATH environment variable <span class="keyword">if</span> you</span><br><span class="line">installed software <span class="keyword">in</span> a non-standard prefix.</span><br><span class="line"></span><br><span class="line">Alternatively, you may <span class="built_in">set</span> the environment variables nm_CFLAGS</span><br><span class="line">and nm_LIBS to avoid the need to call pkg-config.</span><br><span class="line">See the pkg-config man page <span class="keyword">for</span> more details.</span><br></pre></td></tr></table></figure><ul><li><p>错误原因：NetworkManager 库未找到</p></li><li><p>解决办法：安装 NetworkManager 开发包</p></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt-get install libnm-dev</span><br></pre></td></tr></table></figure><hr><h4><span id="20-uci-报错">20. <code>uci</code> 报错</span></h4><ul><li>错误信息：</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">configure: error: UCI library libuci not found</span><br><span class="line">make: *** 没有指明目标并且找不到 makefile。 停止。</span><br></pre></td></tr></table></figure><ul><li><p>错误原因：UCI (Unified Configuration Interface) 库未找到</p></li><li><p>解决办法：<br>参考以下博客：<a href="https://blog.csdn.net/liangcsdn111/article/details/122256751">ubuntu20编译UCI-详细步骤记录_uci bianyi-CSDN博客</a><br>安装lua libubix libuci</p></li></ul><hr><h4><span id="21-cutils-报错">21. <code>cutils</code> 报错</span></h4><ul><li>错误信息：</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">checking <span class="keyword">for</span> property_get <span class="keyword">in</span> -lcutils... no</span><br><span class="line">configure: error: Android library libcutils not found</span><br><span class="line">make: *** 没有指明目标并且找不到 makefile。 停止。</span><br></pre></td></tr></table></figure><ul><li><p>错误原因：Android libcutils 库未找到</p></li><li><p>解决办法：安装 Android libcutils 开发包</p></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt-get install android-libcutils-dev</span><br></pre></td></tr></table></figure><hr><h4><span id="22-ip4tc-报错">22. <code>ip4tc</code> 报错</span></h4><ul><li>错误信息：</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">configure: error: Package requirements (libip4tc) were not met:</span><br><span class="line"></span><br><span class="line">No package <span class="string">&#x27;libip4tc&#x27;</span> found</span><br><span class="line"></span><br><span class="line">Consider adjusting the PKG_CONFIG_PATH environment variable <span class="keyword">if</span> you</span><br><span class="line">installed software <span class="keyword">in</span> a non-standard prefix.</span><br><span class="line"></span><br><span class="line">Alternatively, you may <span class="built_in">set</span> the environment variables libiptc_CFLAGS</span><br><span class="line">and libiptc_LIBS to avoid the need to call pkg-config.</span><br><span class="line">See the pkg-config man page <span class="keyword">for</span> more details.</span><br></pre></td></tr></table></figure><ul><li><p>错误原因：IPTables 库未找到</p></li><li><p>解决办法：安装 IPTables 开发包</p></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt-get install libip4tc-dev</span><br></pre></td></tr></table></figure><hr><h4><span id="23-gprbuild-报错">23. <code>gprbuild</code> 报错</span></h4><ul><li>错误信息：</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">checking <span class="keyword">for</span> gprbuild... no</span><br><span class="line">configure: error: gprbuild not found</span><br></pre></td></tr></table></figure><ul><li><p>错误原因：这个错误表明系统缺少 Ada 项目的构建工具 gprbuild</p></li><li><p>解决办法：安装 gprbuild</p></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt-get install gprbuild</span><br></pre></td></tr></table></figure><hr><h4><span id="24-make-报错">24. <code>make</code> 报错</span></h4><ul><li>错误信息：</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">config.log 出现很多基础函数库和头文件找不到；</span><br></pre></td></tr></table></figure><ul><li><p>错误原因：缺少基础的编译工具</p></li><li><p>解决办法：安装 make</p></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt-get install make</span><br></pre></td></tr></table></figure><h3><span id="make-报错">make 报错</span></h3><hr><h4><span id="1-bison-报错">1. <code>bison</code> 报错</span></h4><ul><li>错误信息：</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">  YACC     settings/settings_parser.c</span><br><span class="line">../../ylwrap: 行 176: yacc：未找到命令</span><br></pre></td></tr></table></figure><ul><li><p>错误原因：这个错误表明系统缺少 yacc 解析器生成器工具</p></li><li><p>解决办法：安装 bison</p></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt-get install bison</span><br></pre></td></tr></table></figure><hr><h4><span id="2-flex-报错">2. <code>flex</code> 报错</span></h4><ul><li>错误信息：</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">gcc: error: settings/settings_lexer.c: 没有那个文件或目录</span><br><span class="line">gcc: fatal error: no input files</span><br></pre></td></tr></table></figure><ul><li><p>错误原因：这个错误表明系统缺少由 flex 生成的词法分析器文件。需要先安装词法分析器生成工具并重新生成文件</p></li><li><p>解决办法：安装 flex</p></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt-get install flex</span><br></pre></td></tr></table></figure><hr><h4><span id="3-setuptools-报错">3. <code>setuptools</code> 报错</span></h4><ul><li>错误信息：</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">&quot;setup.py&quot;</span>, line 1, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">    from setuptools import setup</span><br><span class="line">ModuleNotFoundError: No module named <span class="string">&#x27;setuptools&#x27;</span></span><br></pre></td></tr></table></figure><ul><li>解决办法：安装 setuptools</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install --upgrade setuptools</span><br></pre></td></tr></table></figure><hr><h4><span id="4-gprbuild-报错">4. <code>gprbuild</code> 报错</span></h4><ul><li>错误信息：</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">gprconfig: can<span class="string">&#x27;t find a native toolchain for language &#x27;</span>ada<span class="string">&#x27;</span></span><br><span class="line"><span class="string">build_common.gpr:1:06: unknown project file: &quot;tkmrpc_client&quot;</span></span><br><span class="line"><span class="string">build_common.gpr:2:06: unknown project file: &quot;tkmrpc_server-ees&quot;</span></span><br></pre></td></tr></table></figure><ul><li>解决办法：安装 gnat 和 gprbuild</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt-get install gnat gprbuild</span><br></pre></td></tr></table></figure><hr><h4><span id="5-unwind-报错">5. <code>unwind</code> 报错</span></h4><ul><li>错误信息：</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">checking <span class="keyword">for</span> unw_backtrace <span class="keyword">in</span> -lunwind... no</span><br><span class="line">configure: error: libunwind not found!</span><br></pre></td></tr></table></figure><ul><li>解决办法：安装 libunwind 开发包</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt-get install libunwind-dev</span><br></pre></td></tr></table></figure><hr><h4><span id="6-cov-报错">6. <code>cov</code> 报错</span></h4><ul><li>错误信息：</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">checking <span class="keyword">for</span> lcov... no</span><br><span class="line">configure: error: lcov not found</span><br></pre></td></tr></table></figure><ul><li>解决办法：安装 lcov</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt install lcov</span><br></pre></td></tr></table></figure><hr><h4><span id="7-gem-报错">7. <code>gem</code> 报错</span></h4><ul><li>错误信息：</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">checking <span class="keyword">for</span> gem... no</span><br><span class="line">configure: error: RubyGems package manager not found</span><br></pre></td></tr></table></figure><ul><li>解决办法：安装 Ruby</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt install ruby-full</span><br></pre></td></tr></table></figure><hr><h4><span id="8-easy_install-报错">8. <code>easy_install</code> 报错</span></h4><ul><li>错误信息：</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">checking <span class="keyword">for</span> easy_install... no</span><br><span class="line">configure: error: Python easy_install not found</span><br></pre></td></tr></table></figure><ul><li>解决办法：安装 Python setuptools</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 这个方法可能不管用</span></span><br><span class="line"><span class="built_in">sudo</span> apt-get install python-setuptools</span><br><span class="line"></span><br><span class="line"><span class="comment"># 替代方法</span></span><br><span class="line"><span class="built_in">sudo</span> apt update</span><br><span class="line"><span class="built_in">sudo</span> apt install curl</span><br><span class="line">curl https://bootstrap.pypa.io/ez_setup.py --output ez_setup.py</span><br><span class="line"><span class="built_in">sudo</span> python ez_setup.py</span><br></pre></td></tr></table></figure><hr><h3><span id="未解决问题">未解决问题</span></h3><hr><h4><span id="1-windows-编译问题">1. Windows 编译问题</span></h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">找不到 <span class="string">&quot;win32_socket.h&quot;</span></span><br></pre></td></tr></table></figure><p>使用 <code>--disable-winhttp</code> 选项，禁用 Windows HTTP 支持</p><hr><h4><span id="2-汇编问题">2. 汇编问题</span></h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">汇编问题</span><br></pre></td></tr></table></figure><p>使用 <code>--disable-padlock</code> 选项，禁用 Padlock 支持</p><hr><h4><span id="3-macos-编译问题">3. macOS 编译问题</span></h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">macOS 编译问题</span><br></pre></td></tr></table></figure><p>使用 <code>--disable-keychain</code> 选项，禁用 Keychain 支持</p><hr>]]></content>
      
      
      <categories>
          
          <category> strongswan </category>
          
      </categories>
      
      
        <tags>
            
            <tag> strongswan </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo blog 2: 步骤简化 </title>
      <link href="/2026/02/01/2-Hexo-blog-2-%E6%AD%A5%E9%AA%A4%E7%AE%80%E5%8C%96/"/>
      <url>/2026/02/01/2-Hexo-blog-2-%E6%AD%A5%E9%AA%A4%E7%AE%80%E5%8C%96/</url>
      
        <content type="html"><![CDATA[<p>在上一篇文章中，我介绍了我搭建 hexo 博客的过程，但过程中总感觉很别扭，因为别人的教程其实很简单，但我部署的时候问题不少，肯定是哪里出了问题。之后我又重新研究了一下，这篇文章就重新整理了一下。</p><h2><span id="一-搭建框架">一、搭建框架</span></h2><p>为了方便理解，我画了一个框架图，如下：</p><p><img src="/images/hexo-blog/p1.jpg" alt="步骤框架"></p><p>如上图所示，以 github pages 服务为基础搭建 hexo 博客，分为两个部分：</p><ol><li>本地搭建 hexo 博客；</li><li>github pages 托管博客；</li></ol><p>而github 上包括部署、存储，分别用两个仓库（使用自动部署工作流可以只用一个仓库），如果要囊括gitalk评论功能，还需要在github 上创建一个用于存储评论的应用仓库。</p><h2><span id="二-搭建步骤">二、搭建步骤</span></h2><p>为了过程清晰方便理解，步骤一共分为以下几步：</p><h3><span id="-环境搭建">- 环境搭建</span></h3><ol><li>安装 node.js；</li></ol><p>Node.js 的安装直接参考 <a href="https://nodejs.org/en/download">菜鸟关于Node.js的教学</a>就可以了。</p><ol start="2"><li>安装 hexo 命令行工具；</li></ol><p>安装完 Node.js 后，在命令行中使用 <code>npm</code> 安装 hexo 命令行工具：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g hexo-cli</span><br></pre></td></tr></table></figure><h3><span id="-博客搭建">- 博客搭建</span></h3><ol><li>初始化blog目录，或者cd到blog目录下，执行 <code>hexo init</code>。</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo init &lt;blog-name&gt;</span><br></pre></td></tr></table></figure><p>hexo 初始化需要空目录，否则会报错，所以需要把 .git 目录备份到其它地方，初始化后再把 .git 目录恢复。</p><ol start="2"><li>安装博客依赖：</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install</span><br></pre></td></tr></table></figure><ol start="3"><li>然后本地就可以直接使用 <code>hexo generate</code> 或 <code>hexo g</code> 来生成静态文件，使用 <code>hexo server</code> 或 <code>hexo s</code> 来预览博客了。</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hexo generate</span><br><span class="line">hexo server</span><br></pre></td></tr></table></figure><p>如果要指定端口，比如指定为 8080，则可以使用 <code>hexo server -p 8080</code>。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo server -p 8080</span><br></pre></td></tr></table></figure><h3><span id="-远程部署">- 远程部署</span></h3><ol><li>创建github pages 仓库；</li></ol><p>在github 上创建一个新的仓库，仓库名必须为 <code>&lt;username&gt;.github.io</code>，其中 <code>&lt;username&gt;</code> 是你的 github 用户名。（这一步很关键，决定你的站点使用的是你的用户站点而不是单个仓库的仓库站点，用户站点每个用户只能有一个，而单个仓库站点可以有多个）</p><p>上一次我就是这里搞错了，随便使用了一个仓库名，导致主题中很多资源路径都指向了错误的位置。</p><ol start="2"><li>配置 hexo 博客的部署信息；</li></ol><p>在博客目录下的 <code>_config.yml</code> 文件中，找到 <code>deploy</code> 配置项，将其修改为：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">  <span class="attr">repo:</span> <span class="string">https://github.com/&lt;username&gt;/&lt;username&gt;.github.io.git</span></span><br><span class="line">  <span class="attr">branch:</span> <span class="string">main</span></span><br></pre></td></tr></table></figure><p>其中 <code>&lt;username&gt;</code> 是你的 github 用户名。</p><ol start="3"><li>部署博客到 github pages；</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo deploy</span><br></pre></td></tr></table></figure><p>这样基本的部署就相当于完成了，修改主题也非常方便，不需要像我上一篇那样出了问题，还修改了主题的源代码。</p><h3><span id="-评论功能">- 评论功能</span></h3><ol><li>创建github 应用仓库；</li></ol><p>在github 上创建一个新的仓库，仓库名可以任意取，比如 <code>hexo-blog-comments</code>。在用户设置的最后一栏有个开发者设置，点击进入，创建一个新的应用，应用名可以任意取，比如 <code>hexo-blog-comments</code>。然后把域名、仓库信息填写到应用中，将应用的 ID 和密钥保存下来，后面会用。</p><p><img src="/images/hexo-blog/p2.png" alt="gitalk应用配置"></p><ol start="2"><li>配置 hexo 博客的评论功能；</li></ol><p>在博客目录下的 <code>_config.&lt;theme&gt;.yml</code> 文件中，找到 <code>gitalk</code> 配置项，将其修改为：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">gitalk:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">clientID:</span> <span class="string">&lt;clientID&gt;</span></span><br><span class="line">  <span class="attr">clientSecret:</span> <span class="string">&lt;clientSecret&gt;</span></span><br><span class="line">  <span class="attr">repo:</span> <span class="string">&lt;repo&gt;</span></span><br><span class="line">  <span class="attr">owner:</span> <span class="string">&lt;owner&gt;</span></span><br><span class="line">  <span class="attr">admin:</span> [<span class="string">&lt;admin&gt;</span>]</span><br><span class="line">  <span class="attr">distractionFreeMode:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><p>其中 <code>&lt;clientID&gt;</code> 和 <code>&lt;clientSecret&gt;</code> 是在 github 应用仓库中创建的应用的 ID 和密钥，<code>&lt;repo&gt;</code> 是应用仓库的名称，<code>&lt;owner&gt;</code> 是 github 用户名，<code>&lt;admin&gt;</code> 是 github 用户名，多个用户名之间用逗号隔开。</p><ol start="3"><li>部署博客到 github pages；</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo deploy</span><br></pre></td></tr></table></figure><h2><span id="三-总结">三、总结</span></h2><p>通过以上步骤，就可以搭建一个基于 hexo 的博客，并且使用 github pages 进行托管，同时支持 gitalk 评论功能。整个过程相对简化，避免了上一篇文章中遇到的问题，希望对大家有所帮助。</p><p>正所谓 <code>温故而知新</code>，反复学习的过程中，才会发现原来很多问题都是自己忽略的。</p>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
            <tag> github </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo blog 1: 搭建步骤 </title>
      <link href="/2026/01/30/1-Hexo-blog-1-%E6%90%AD%E5%BB%BA%E6%AD%A5%E9%AA%A4/"/>
      <url>/2026/01/30/1-Hexo-blog-1-%E6%90%AD%E5%BB%BA%E6%AD%A5%E9%AA%A4/</url>
      
        <content type="html"><![CDATA[<p>一直想要搭建一个自己 blog，但一直没有选择开始，也算是机缘巧合下，看到一个特别喜欢的主题，决定从零搭建。期间不管是框架的改变，还是编译遇到各种问题，都搞得晕头转向，不过最终也算是成功了。</p><h2><span id="想法背景">想法背景</span></h2><p>我是在寻找 “解决windows跨平台编译” 问题的过程中，看到了别人搭建的<a href="https://ashe27.github.io/2025/07/18/202507181/" title="解决windows跨平台编译问题">Blog</a>^[1]^，让我萌发搭建自己的Blog的想法。</p><p>最开始直接搜索的如何基于github pages 搭建一个 blog，推荐的是基于 Jekyll 框架和 github pages 搭建，但是主题、build都比较复杂，搞了一天，发现维护部署不够简单，然后看了篇 hexo 的搭建教程，发现非常适合我这种懒狗，于是一拍即合，开始搭建……</p><h2><span id="搭建过程">搭建过程</span></h2><p>Hexo 的搭建过程主要参考了知乎的这篇 <a href="https://zhuanlan.zhihu.com/p/60578464" title="步骤参考">教程</a>。</p><h3><span id="环境准备">环境准备</span></h3><p>Hexo 是基于 node.js 搭建的，所以首先需要准备好 Node.js 环境，Jekyll 是基于 Ruby 搭建的，我之前自己鼓捣了 obsidian 的插件，刚好有 node 环境，这也是我选择 hexo 的原因。</p><p>Node.js 的安装直接参考 <a href="https://nodejs.org/en/download">菜鸟关于Node.js的教学</a>就可以了。安装好后，在命令提示符窗口（cmd）使用 npm 全球安装 hexo-cli：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g hexo-cli</span><br></pre></td></tr></table></figure><h3><span id="创建博客">创建博客</span></h3><p>在选择好目录后，使用 hexo init 初始化博客：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo init &lt;blog-name&gt;</span><br></pre></td></tr></table></figure><p>hexo 初始化需要空目录，否则会报错，所以需要把 .git 目录备份到其它地方，初始化后再把 .git 目录恢复。</p><p>进入博客目录，安装依赖：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install</span><br></pre></td></tr></table></figure><p>然后就可以本地进行构建（<code>hexo generate</code> 或 <code>hexo g</code>）；</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo generate <span class="comment"># 简写 hexo g</span></span><br></pre></td></tr></table></figure><p>启动本地服务器（ <code>hexo server</code>），查看效果：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">hexo server <span class="comment"># 简写 hexo s</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 如果要指定服务端口，默认是 4000</span></span><br><span class="line">hexo server -p 4001</span><br></pre></td></tr></table></figure><p>清除 build 目录：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo clean </span><br></pre></td></tr></table></figure><h3><span id="选择主题">选择主题</span></h3><p>选择一个喜欢的主题，我选择的是 <a href="https://github.com/zchengsite/hexo-theme-oranges?tab=readme-ov-file" title="主题">hexo-theme-oranges</a>，可以直接 clone 到 themes 目录下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/zchengsite/hexo-theme-oranges.git themes/oranges</span><br></pre></td></tr></table></figure><p>或者使用 submodule 方式添加主题(我使用的这种方式)，这种如果别人更新了主题，我也可以很方便地更新：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git submodule add https://github.com/zchengsite/hexo-theme-oranges.git themes/oranges</span><br></pre></td></tr></table></figure><p>如果要删除 submodule 方式添加的主题，相对来说比较麻烦，需要执行以下命令：</p><ol><li>停止对子模块的追踪</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git submodule deinit themes/oranges</span><br></pre></td></tr></table></figure><p>这会从 <em>.git&#x2F;config</em> 文件中移除子模块的相关信息。</p><ol start="2"><li>删除 submodule 目录</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">rm</span> themes/oranges</span><br></pre></td></tr></table></figure><p>同时，删除 <em>.git&#x2F;modules&#x2F;子模块路径</em> 目录：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">rm</span> .git/modules/themes/oranges </span><br></pre></td></tr></table></figure><ol start="3"><li>从 Git 索引中移除子模块</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">rm</span> --cached themes/oranges</span><br></pre></td></tr></table></figure><ol start="4"><li>提交更改</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git commit -m <span class="string">&quot;Remove submodule themes oranges&quot;</span></span><br></pre></td></tr></table></figure><h3><span id="配置博客">配置博客</span></h3><p>编辑博客根目录下的 _config.yml 文件，将 theme 字段设置为 oranges：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">theme:</span> <span class="string">oranges</span></span><br></pre></td></tr></table></figure><p>然后将 oranges 下的 _config.yml 文件中的内容复制到根目录 _config.oranges.yml，用来修改主题的相关配置。</p><h3><span id="部署到-github-pages">部署到 github pages</span></h3><p>可以使用 hexo deploy 部署到 github pages：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo deploy</span><br></pre></td></tr></table></figure><p>但这种方式没办法将源码提交上去，或者是我自己也没搞懂，等有时间再研究一下。</p><p>我是直接将源码提交到 github pages 分支，然后在 github pages 中设置为从该分支构建，添加了一个 workflow 文件，用来自动构建并部署到 github pages。我让直接让 AI 帮忙写了一个，内容如下：</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">Pages</span></span><br><span class="line"></span><br><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">push:</span></span><br><span class="line">    <span class="attr">branches:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">main</span> <span class="comment"># default branch</span></span><br><span class="line"></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">build:</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">actions/checkout@v4</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">token:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.GITHUB_TOKEN</span> <span class="string">&#125;&#125;</span></span><br><span class="line">          <span class="comment"># If your repository depends on submodule, please see: https://github.com/actions/checkout</span></span><br><span class="line">          <span class="attr">submodules:</span> <span class="string">recursive</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Use</span> <span class="string">Node.js</span> <span class="number">20</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">actions/setup-node@v4</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="comment"># Examples: 20, 18.19, &gt;=16.20.2, lts/Iron, lts/Hydrogen, *, latest, current, node</span></span><br><span class="line">          <span class="comment"># Ref: https://github.com/actions/setup-node#supported-version-syntax</span></span><br><span class="line">          <span class="attr">node-version:</span> <span class="string">&quot;20&quot;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Cache</span> <span class="string">NPM</span> <span class="string">dependencies</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">actions/cache@v4</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">path:</span> <span class="string">node_modules</span></span><br><span class="line">          <span class="attr">key:</span> <span class="string">$&#123;&#123;</span> <span class="string">runner.OS</span> <span class="string">&#125;&#125;-npm-cache</span></span><br><span class="line">          <span class="attr">restore-keys:</span> <span class="string">|</span></span><br><span class="line"><span class="string">            $&#123;&#123; runner.OS &#125;&#125;-npm-cache</span></span><br><span class="line"><span class="string"></span>      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Install</span> <span class="string">Dependencies</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">npm</span> <span class="string">install</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Build</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">npm</span> <span class="string">run</span> <span class="string">build</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Upload</span> <span class="string">Pages</span> <span class="string">artifact</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">actions/upload-pages-artifact@v3</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">path:</span> <span class="string">./public</span></span><br><span class="line">  <span class="attr">deploy:</span></span><br><span class="line">    <span class="attr">needs:</span> <span class="string">build</span></span><br><span class="line">    <span class="attr">permissions:</span></span><br><span class="line">      <span class="attr">pages:</span> <span class="string">write</span></span><br><span class="line">      <span class="attr">id-token:</span> <span class="string">write</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="attr">name:</span> <span class="string">github-pages</span></span><br><span class="line">      <span class="attr">url:</span> <span class="string">$&#123;&#123;</span> <span class="string">steps.deployment.outputs.page_url</span> <span class="string">&#125;&#125;</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Deploy</span> <span class="string">to</span> <span class="string">GitHub</span> <span class="string">Pages</span></span><br><span class="line">        <span class="attr">id:</span> <span class="string">deployment</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">actions/deploy-pages@v4</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>这样的话，只需要在每次修改博客内容后，提交到 main 分支，就会自动触发 workflow 构建并部署到 github pages。</p><h2><span id="遇到的问题及解决方案">遇到的问题及解决方案</span></h2><p>在搭建过程中，遇到了不少问题，这里记录下来提供参考：</p><h3><span id="问题一主题配置不生效">问题一：主题配置不生效</span></h3><p>在配置oranges主题时，一开始创建了单独的配置文件 <code>_config.oranges.yml</code>，但发现主题没有生效。浏览器报错如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Refused to apply style from <span class="string">&#x27;http://localhost:4000/css/main.css&#x27;</span> because its MIME <span class="built_in">type</span> (<span class="string">&#x27;text/html&#x27;</span>) is not a supported stylesheet MIME <span class="built_in">type</span>...</span><br><span class="line">Failed to load resource: the server responded with a status of 404 (Not Found)</span><br></pre></td></tr></table></figure><p><strong>问题原因</strong>：<br>Hexo构建是获取css资源是直接访问根目录获取的，我的配置中 <code>url: https://feng-jianwutong.github.io/fengjianwutong</code>，<code>root: /fengjianwutong/</code>，如果访问 <code>http://localhost:4000/css/main.css</code> 是正确的，但是访问 <code>https://feng-jianwutong.github.io/fengjianwutong/css/main.css</code> 就会报错，因为 <code>css/main.css</code> 是在 <code>public</code> 目录下的，而不是在 <code>root</code> 目录下的。原因是主题中的 layout 中的代码使用的是绝对路径，如果使用子目录部署会有问题。</p><p><strong>解决方案</strong>：<br>我直接 fork 主题代码到<a href="https://github.com/Feng-jianwutong/hexo-theme-oranges" title="我的主题">我的仓库</a>，修改了其中的代码，将绝对路径改为相对路径，解决了这个问题。</p><p>比如在 <code>oranges/layout/_partial/head.ejs</code> 中，有如下代码：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;link rel=&quot;stylesheet&quot; href=&quot;/css/main.css&quot;&gt;</span><br></pre></td></tr></table></figure><p>我将其改为：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;link rel=&quot;stylesheet&quot; href=&quot;&lt;%- url_for(&#x27;/css/main.css&#x27;) %&gt;&quot;&gt;</span><br></pre></td></tr></table></figure><h3><span id="问题二标签页面无法访问">问题二：标签页面无法访问</span></h3><p>在配置完主题后，我发现访问 <code>/tags/</code> 页面时返回404错误，尽管文章中定义了标签。</p><p><strong>解决方案</strong>：<br>这个参考主题的 README 中提到了如何使用标签索引插件，在 hexo 博客项目根目录下执行，在source文件夹下生成tags文件夹，用来存放标签页面的索引文件。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new page tags</span><br></pre></td></tr></table></figure><p>接着修改tags文件夹下index为以下内容</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: tags</span><br><span class="line">date: 2019-05-03 12:03:35</span><br><span class="line">type: &quot;tags&quot;</span><br><span class="line">categories:</span><br><span class="line"><span class="section">tags:</span></span><br><span class="line"><span class="section">---</span></span><br></pre></td></tr></table></figure><p>并在配置文件_config.oranges.yml修改对应enable为true，如不想展示，设置为false即可。</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">navbar:</span></span><br><span class="line">  <span class="bullet">-</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">标签</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">path:</span> <span class="string">/tags/</span></span><br></pre></td></tr></table></figure><h2><span id="总结">总结</span></h2><p>这次部署经历期间好几次都感觉要失败准备放弃，但是通过查阅、请教公司前端的同事，最后还是克服重重困难，成功部署。</p><p>我想说的是，成功真的会让人上瘾，这次的成功，会让我下一次遇到困难时迎难而上。</p><p>最后再次感叹时代的进步，AI真的很好用，帮助我快速定位和解决问题。</p><h2><span id="参考">参考</span></h2><p><code>[1] https://ashe27.github.io/2025/07/18/202507181/ </code><br><code>[2] https://hexo.theme.oranges.zcheng.site/ </code><br><code>[3] https://zhuanlan.zhihu.com/p/60578464 </code><br><code>[4] https://github.com/zchengsite/hexo-theme-oranges?tab=readme-ov-file </code><br><code>[5] https://github.com/Feng-jianwutong/hexo-theme-oranges </code></p>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
            <tag> github </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
